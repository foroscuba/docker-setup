# XenForo-specific NGINX configuration
# Note: client_max_body_size is set by PHP_POST_MAX_SIZE env var

# XenForo URL rewriting
location / {
    try_files $uri $uri/ /index.php?$uri&$args;
}

# Block access to sensitive directories
location /internal_data/ {
    internal;
}

location /library/ {
    internal;
}

location /src/ {
    internal;
}

location /install/data/ {
    internal;
}

location /install/templates/ {
    internal;
}

# Static file caching
location ~* \.(css|js|jpg|jpeg|png|gif|ico|woff|woff2|ttf|svg)$ {
    expires 30d;
    add_header Cache-Control "public, immutable";
}
